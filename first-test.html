<!DOCTYPE html>
<html>
<head>
    <title>Visible GTA-style Game</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            font-family: Arial, sans-serif;
        }
        #vehiclePrompt {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
            font-family: Arial, sans-serif;
            display: none;
        }
    </style>
</head>
<body>
    <div id="info">
        WASD: Move | SPACE: Jump | E: Enter/Exit Vehicle<br>
        Mouse: Look Around | Left Click: Shoot
    </div>
    <div id="vehiclePrompt">Press E to enter vehicle</div>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/PointerLockControls.js"></script>
    
    <script>
        // Initialize Three.js with proper visibility
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87CEEB); // Sky blue
        
        // Improved camera setup - starts looking at the scene
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 10, 20); // Back and above the scene
        camera.lookAt(0, 0, 0); // Look at center of scene

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);

        // Enhanced lighting - makes everything visible
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6); // Brighter ambient light
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(10, 20, 10); // Better light position
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 2048;
        directionalLight.shadow.mapSize.height = 2048;
        scene.add(directionalLight);

        // Add a helper to visualize the light
        const lightHelper = new THREE.DirectionalLightHelper(directionalLight, 5);
        scene.add(lightHelper);

        // Add axes helper to understand orientation
        const axesHelper = new THREE.AxesHelper(10);
        scene.add(axesHelper);

        // Create visible ground with grid
        const groundGeometry = new THREE.PlaneGeometry(100, 100);
        const groundMaterial = new THREE.MeshStandardMaterial({ 
            color: 0x3a5f0b,
            side: THREE.DoubleSide
        });
        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);

        // Add grid helper
        const gridHelper = new THREE.GridHelper(100, 100);
        scene.add(gridHelper);

        // Create a large, visible red cube (building)
        const cubeGeometry = new THREE.BoxGeometry(10, 10, 10);
        const cubeMaterial = new THREE.MeshStandardMaterial({ color: 0xff0000 });
        const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
        cube.position.set(0, 5, 0);
        cube.castShadow = true;
        scene.add(cube);

        // Create a visible green player capsule
        const playerGeometry = new THREE.CapsuleGeometry(1, 3, 8, 16);
        const playerMaterial = new THREE.MeshStandardMaterial({ color: 0x00ff00 });
        const player = new THREE.Mesh(playerGeometry, playerMaterial);
        player.position.set(5, 2, 0);
        player.castShadow = true;
        scene.add(player);

        // Create a visible blue vehicle
        const carGeometry = new THREE.BoxGeometry(5, 2, 8);
        const carMaterial = new THREE.MeshStandardMaterial({ color: 0x0000ff });
        const car = new THREE.Mesh(carGeometry, carMaterial);
        car.position.set(-5, 1, 0);
        car.castShadow = true;
        scene.add(car);

        // Add wheels to the car
        const wheelGeometry = new THREE.CylinderGeometry(1, 1, 0.5, 16);
        wheelGeometry.rotateZ(Math.PI / 2);
        const wheelMaterial = new THREE.MeshStandardMaterial({ color: 0x333333 });
        
        const wheelPositions = [
            { x: -3, y: 0, z: -3 },
            { x: 3, y: 0, z: -3 },
            { x: -3, y: 0, z: 3 },
            { x: 3, y: 0, z: 3 }
        ];
        
        wheelPositions.forEach(pos => {
            const wheel = new THREE.Mesh(wheelGeometry, wheelMaterial);
            wheel.position.set(pos.x + car.position.x, pos.y + car.position.y, pos.z + car.position.z);
            scene.add(wheel);
        });

        // Simple controls to rotate camera
        let mouseX = 0;
        let mouseY = 0;
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotate camera based on mouse position
            camera.position.x = Math.sin(mouseX * Math.PI) * 20;
            camera.position.z = Math.cos(mouseX * Math.PI) * 20;
            camera.position.y = 10 + mouseY * 10;
            camera.lookAt(0, 0, 0);
            
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
